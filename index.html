<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DUSTHECAT.exe</title>

<link rel="stylesheet" href="https://unpkg.com/98.css" />

<style>
body {
margin: 0;
background: teal;
font-family: "MS Sans Serif", sans-serif;
overflow: hidden;
}

/* ---------------- BOOT SCREEN ---------------- */

#boot-screen {
position: fixed;
inset: 0;
background: url("./bootscreen.jpg") center center no-repeat;
background-size: cover;
display: flex;
justify-content: center;
align-items: center;
z-index: 9999;
overflow: hidden;
}

.boot-container {
position: absolute;
bottom: 4%;
left: 50%;
transform: translateX(-50%);
display: flex;
flex-direction: column;
align-items: center;
}

.boot-bar {
width: 320px;
height: 20px;
border: 2px solid black;
background: #c0c0c0;
padding: 2px;
}

.boot-progress {
height: 100%;
width: 0%;
background: linear-gradient(90deg, #000080, #1084d0);
}

.boot-text {
margin-top: 15px;
color: black;
font-size: 14px;
}

/* ---------------- DESKTOP ---------------- */

#desktop {
display: none;
height: calc(100vh - 40px);
padding: 0;
position: relative;
overflow: hidden;
}

/* A layer so we can scatter icons anywhere */
#icon-layer {
position: absolute;
inset: 0;
}

/* Desktop icons */
.icon {
position: absolute;
width: 80px;
text-align: center;
color: white;
cursor: pointer;
user-select: none;
}

.icon img {
width: 32px;
height: 32px;
}

/* ---------------- FLOATING CAT ---------------- */

#floating-cat {
position: absolute;
width: 120px;
z-index: 1;
pointer-events: none;
}

/* ---------------- WINDOWS ---------------- */

.window {
position: absolute;
width: 420px;
z-index: 5;
}

.media-window {
width: 520px;
}

.media-content {
width: 100%;
max-height: 60vh;
border: 1px inset #000;
background: #fff;
display: block;
}

.contract-box {
font-family: monospace;
font-size: 12px;
word-break: break-all;
background: #fff;
padding: 6px;
border: 1px inset #000;
}

/* ---------------- TASKBAR ---------------- */

#taskbar {
position: fixed;
bottom: 0;
width: 100%;
height: 40px;
background: #c0c0c0;
border-top: 2px solid white;
display: flex;
align-items: center;
padding: 0 5px;
box-sizing: border-box;
z-index: 1000;
}

.start-button button {
font-weight: bold;
padding: 2px 12px;
}

.taskbar-spacer {
flex-grow: 1;
}

.taskbar-clock {
margin-right: 5px;
}

/* ---------------- START MENU ---------------- */

#start-menu {
display: none;
position: fixed;
bottom: 40px;
left: 5px;
width: 200px;
z-index: 2000;
}
</style>
</head>

<body>

<!-- BOOT SCREEN -->
<div id="boot-screen">
<div class="boot-container">
<div class="boot-bar">
<div class="boot-progress" id="boot-progress"></div>
</div>
<div class="boot-text">Starting DUSTHECAT.exe...</div>
</div>
</div>

<audio id="startup-sound">
<source src="https://www.myinstants.com/media/sounds/windows-98-startup.mp3">
</audio>

<!-- DESKTOP -->
<div id="desktop">

<!-- Floating cat -->
<img src="./dusthecat.png" id="floating-cat" alt="DUSTHECAT">

<!-- Icons get scattered inside this layer -->
<div id="icon-layer"></div>

<!-- About Window -->
<div id="about" class="window" style="top:120px; left:220px; display:none;">
<div class="title-bar" onmousedown="dragStart(event, this.parentElement)">
<div class="title-bar-text">About DUSTHECAT.exe</div>
<div class="title-bar-controls">
<button aria-label="Close" onclick="closeWindow('about')"></button>
</div>
</div>
<div class="window-body">
<p><strong>DUSTHECAT</strong> is the most powerful meme coin on Pump.fun.</p>
<button onclick="alert('YOU ARE EARLY.')">Buy Now</button>
</div>
</div>

<!-- Token Window -->
<div id="token" class="window" style="top:150px; left:320px; display:none;">
<div class="title-bar" onmousedown="dragStart(event, this.parentElement)">
<div class="title-bar-text">Token Info</div>
<div class="title-bar-controls">
<button aria-label="Close" onclick="closeWindow('token')"></button>
</div>
</div>
<div class="window-body">
<ul>
<li>Supply: 1,000,000,000</li>
<li>Tax: 0%</li>
<li>Chain: Solana</li>
</ul>
<p>Contract:</p>
<div class="contract-box">PASTE_CONTRACT_ADDRESS</div>
</div>
</div>

<!-- Roadmap Window -->
<div id="roadmap" class="window" style="top:180px; left:420px; display:none;">
<div class="title-bar" onmousedown="dragStart(event, this.parentElement)">
<div class="title-bar-text">Roadmap.doc</div>
<div class="title-bar-controls">
<button aria-label="Close" onclick="closeWindow('roadmap')"></button>
</div>
</div>
<div class="window-body">
<ol>
<li>Launch</li>
<li>Memes</li>
<li>Viral</li>
<li>Billions</li>
</ol>
</div>
</div>

<!-- Media Viewer Window (re-used for pics/gifs/videos) -->
<div id="mediaViewer" class="window media-window" style="top:110px; left:160px; display:none;">
<div class="title-bar" onmousedown="dragStart(event, this.parentElement)">
<div class="title-bar-text" id="mediaTitle">Media Viewer</div>
<div class="title-bar-controls">
<button aria-label="Close" onclick="closeMedia()"></button>
</div>
</div>
<div class="window-body" id="mediaBody">
<!-- Filled by JS -->
</div>
</div>

</div>

<!-- TASKBAR -->
<div id="taskbar">
<div class="start-button">
<button onclick="toggleStartMenu()">Start</button>
</div>
<div class="taskbar-spacer"></div>
<div class="taskbar-clock">
<div class="window">
<div class="window-body" id="clock" style="padding:4px 10px;"></div>
</div>
</div>
</div>

<!-- START MENU -->
<div id="start-menu" class="window">
<div class="window-body">
<p><strong>Programs</strong></p>
<hr>
<p style="cursor:pointer;" onclick="openWindow('about')">About</p>
<p style="cursor:pointer;" onclick="openWindow('token')">Token Info</p>
<p style="cursor:pointer;" onclick="openWindow('roadmap')">Roadmap</p>
</div>
</div>

<script>
/* ---------------- BOOT ANIMATION ---------------- */
let progress = 0;
const bootInterval = setInterval(() => {
progress += 4;
document.getElementById("boot-progress").style.width = progress + "%";
if (progress >= 100) {
clearInterval(bootInterval);
setTimeout(() => {
document.getElementById("boot-screen").style.display = "none";
document.getElementById("desktop").style.display = "block";
document.getElementById("startup-sound").play();

startCatAnimation();
buildAndScatterIcons();
}, 500);
}
}, 100);

/* ---------------- CLOCK ---------------- */
function updateClock() {
const now = new Date();
document.getElementById("clock").textContent =
now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
}
setInterval(updateClock, 1000);
updateClock();

/* ---------------- START MENU ---------------- */
function toggleStartMenu() {
const menu = document.getElementById("start-menu");
menu.style.display = menu.style.display === "none" ? "block" : "none";
}

/* close start menu when clicking elsewhere */
document.addEventListener("mousedown", (e) => {
const menu = document.getElementById("start-menu");
const startButton = document.querySelector(".start-button button");
if (menu.style.display === "block" && !menu.contains(e.target) && e.target !== startButton) {
menu.style.display = "none";
}
});

/* ---------------- WINDOW CONTROLS ---------------- */
function openWindow(id) {
document.getElementById(id).style.display = "block";
document.getElementById("start-menu").style.display = "none";
bringToFront(document.getElementById(id));
}
function closeWindow(id) {
document.getElementById(id).style.display = "none";
}

/* ---------------- Z-ORDER (BRING TO FRONT) ---------------- */
let topZ = 10;
function bringToFront(el) {
topZ += 1;
el.style.zIndex = topZ;
}

/* ---------------- DRAGGING ---------------- */
let dragItem = null;
let offsetX = 0;
let offsetY = 0;

function dragStart(e, element) {
dragItem = element;
bringToFront(element);
offsetX = e.clientX - element.offsetLeft;
offsetY = e.clientY - element.offsetTop;
document.onmousemove = drag;
document.onmouseup = dragEnd;
}
function drag(e) {
if (dragItem) {
dragItem.style.left = (e.clientX - offsetX) + "px";
dragItem.style.top = (e.clientY - offsetY) + "px";
}
}
function dragEnd() {
document.onmousemove = null;
dragItem = null;
}

/* ---------------- FLOATING CAT ANIMATION ---------------- */
function startCatAnimation() {
const cat = document.getElementById("floating-cat");
let x = 100;
let y = 100;
let dx = 2;
let dy = 2;

function animate() {
const desktop = document.getElementById("desktop");
const maxX = desktop.clientWidth - cat.clientWidth;
const maxY = desktop.clientHeight - cat.clientHeight;

x += dx;
y += dy;

if (x <= 0 || x >= maxX) dx *= -1;
if (y <= 0 || y >= maxY) dy *= -1;

cat.style.left = x + "px";
cat.style.top = y + "px";

requestAnimationFrame(animate);
}
animate();
}

/* ---------------- DESKTOP ICONS ---------------- */
/*
Replace the mediaUrl values with your own:
- Images/GIFs: https://.../file.png or .jpg or .gif or .webp
- Videos: https://.../file.mp4 (or other formats supported by browsers)

For videos you can optionally set "type": "video".
*/
const desktopIcons = [
// Core windows (open existing windows)
{ label: "About", iconUrl: "https://win98icons.alexmeub.com/icons/png/computer_explorer-0.png", action: () => openWindow("about") },
{ label: "Token.txt", iconUrl: "https://win98icons.alexmeub.com/icons/png/notepad-0.png", action: () => openWindow("token") },
{ label: "Roadmap", iconUrl: "https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png", action: () => openWindow("roadmap") },

// Media icons (placeholders you will replace)
{ label: "meme_01.gif", iconUrl: "https://win98icons.alexmeub.com/icons/png/camera-0.png", type: "image", mediaUrl: "REPLACE_WITH_IMAGE_OR_GIF_URL_1" },
{ label: "meme_02.png", iconUrl: "https://win98icons.alexmeub.com/icons/png/image_old-0.png", type: "image", mediaUrl: "REPLACE_WITH_IMAGE_OR_GIF_URL_2" },
{ label: "clip_01.mp4", iconUrl: "https://win98icons.alexmeub.com/icons/png/media_player-0.png", type: "video", mediaUrl: "REPLACE_WITH_VIDEO_URL_1" },
{ label: "clip_02.mp4", iconUrl: "https://win98icons.alexmeub.com/icons/png/media_player-0.png", type: "video", mediaUrl: "REPLACE_WITH_VIDEO_URL_2" },
{ label: "poster.jpg", iconUrl: "https://win98icons.alexmeub.com/icons/png/paint_file-0.png", type: "image", mediaUrl: "REPLACE_WITH_IMAGE_OR_GIF_URL_3" },
{ label: "gif_party.gif", iconUrl: "https://win98icons.alexmeub.com/icons/png/world-2.png", type: "image", mediaUrl: "REPLACE_WITH_IMAGE_OR_GIF_URL_4" },
{ label: "trailer.mp4", iconUrl: "https://win98icons.alexmeub.com/icons/png/media_player-0.png", type: "video", mediaUrl: "REPLACE_WITH_VIDEO_URL_3" },
{ label: "wallpaper.png", iconUrl: "https://win98icons.alexmeub.com/icons/png/desktop-0.png", type: "image", mediaUrl: "REPLACE_WITH_IMAGE_OR_GIF_URL_5" },
{ label: "hype.gif", iconUrl: "https://win98icons.alexmeub.com/icons/png/message_envelope_open-0.png", type: "image", mediaUrl: "REPLACE_WITH_IMAGE_OR_GIF_URL_6" }
];

function buildAndScatterIcons() {
const layer = document.getElementById("icon-layer");
layer.innerHTML = "";

const desktop = document.getElementById("desktop");
const padding = 16;

// approximate icon footprint
const iconW = 90;
const iconH = 90;

// keep icons away from top-left a bit, and away from cat start area
const minX = padding;
const minY = padding;

const maxX = desktop.clientWidth - iconW - padding;
const maxY = desktop.clientHeight - iconH - padding;

const used = [];

desktopIcons.forEach((item) => {
const el = document.createElement("div");
el.className = "icon";
el.innerHTML = `
<img src="${item.iconUrl}" alt="">
<div>${item.label}</div>
`;

el.addEventListener("dblclick", (e) => {
e.stopPropagation();
if (item.action) {
item.action();
return;
}
if (item.mediaUrl) {
openMedia(item.label, item.mediaUrl, item.type || "image");
}
});

// random placement with simple collision avoidance
let x, y, tries = 0;
do {
x = randInt(minX, Math.max(minX, maxX));
y = randInt(minY, Math.max(minY, maxY));
tries++;
} while (collides(x, y, used, iconW, iconH) && tries < 80);

used.push({ x, y, w: iconW, h: iconH });
el.style.left = x + "px";
el.style.top = y + "px";

layer.appendChild(el);
});
}

function randInt(min, max) {
return Math.floor(Math.random() * (max - min + 1)) + min;
}

function collides(x, y, used, w, h) {
// basic AABB overlap check with a tiny gap
const gap = 6;
for (const u of used) {
const overlap = !(
x + w + gap < u.x ||
x > u.x + u.w + gap ||
y + h + gap < u.y ||
y > u.y + u.h + gap
);
if (overlap) return true;
}
return false;
}

/* ---------------- MEDIA VIEWER ---------------- */
function openMedia(title, url, type) {
const w = document.getElementById("mediaViewer");
const body = document.getElementById("mediaBody");
const t = document.getElementById("mediaTitle");

t.textContent = title;

if (type === "video") {
body.innerHTML = `
<video class="media-content" controls autoplay>
<source src="${url}">
Your browser does not support the video tag.
</video>
<div style="margin-top:8px; font-size:12px;">
Tip: If a video doesn’t load, check the URL and CORS permissions.
</div>
`;
} else {
body.innerHTML = `
<img class="media-content" src="${url}" alt="${title}">
<div style="margin-top:8px; font-size:12px;">
If the image/gif doesn’t load, check the URL.
</div>
`;
}

w.style.display = "block";
w.style.left = "160px";
w.style.top = "110px";
bringToFront(w);
}

function closeMedia() {
const w = document.getElementById("mediaViewer");
const body = document.getElementById("mediaBody");
w.style.display = "none";
body.innerHTML = "";
}
</script>

</body>
</html>
