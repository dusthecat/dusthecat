<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DUSTHECAT.exe</title>

<link rel="stylesheet" href="https://unpkg.com/98.css" />

<style>
body {
margin: 0;
background: url("./desktop.jpg") center center no-repeat;
background-size: cover;
font-family: "MS Sans Serif", sans-serif;
overflow: hidden;
}

/* ---------------- BOOT SCREEN ---------------- */

#boot-screen {
position: fixed;
inset: 0;
background: url("./bootscreen.jpg") center center no-repeat;
background-size: cover;
display: flex;
justify-content: center;
align-items: center;
z-index: 9999;
}

.boot-container {
position: absolute;
bottom: 4%;
left: 50%;
transform: translateX(-50%);
display: flex;
flex-direction: column;
align-items: center;
}

.boot-bar {
width: 320px;
height: 20px;
border: 2px solid black;
background: #c0c0c0;
padding: 2px;
}

.boot-progress {
height: 100%;
width: 0%;
background: linear-gradient(90deg, #000080, #1084d0);
}

.boot-text {
margin-top: 15px;
color: black;
font-size: 14px;
}

/* ---------------- DESKTOP ---------------- */

#desktop {
display: none;
height: calc(100vh - 40px);
position: relative;
overflow: hidden;
}

.fixed-icons {
position: absolute;
top: 20px;
left: 20px;
z-index: 3; /* above background */
}

#icon-layer {
position: absolute;
inset: 0;
z-index: 2;
}

.icon {
width: 80px;
height: 90px;
text-align: center;
color: white;
cursor: pointer;
user-select: none;
position: absolute;
}

.icon img {
width: 32px;
height: 32px;
}

/* fixed icons should stack normally */
.fixed-icons .icon {
position: relative;
}

/* ---------------- FLOATING CAT ---------------- */

#floating-cat {
position: absolute;
width: 120px;
z-index: 1;
pointer-events: none;
}

/* ---------------- WINDOWS ---------------- */

.window {
position: absolute;
width: 520px;
z-index: 5;
}

.media-content {
width: 100%;
max-height: 60vh;
border: 1px inset #000;
background: #fff;
display: block;
}

/* ---------------- TASKBAR ---------------- */

#taskbar {
position: fixed;
bottom: 0;
left: 0;
right: 0;
height: 40px;
background: #c0c0c0;
border-top: 2px solid white;
display: flex;
align-items: center;
padding: 0 6px;
box-sizing: border-box;
z-index: 1000;
}

.start-button button {
font-weight: bold;
padding: 2px 12px;
}

.taskbar-spacer {
flex: 1;
}

.taskbar-clock .window-body {
padding: 3px 8px;
min-width: 60px;
text-align: center;
}

/* ---------------- START MENU ---------------- */

#start-menu {
display: none;
position: fixed;
bottom: 40px;
left: 5px;
width: 200px;
z-index: 2000;
}
</style>
</head>

<body>

<!-- BOOT SCREEN -->
<div id="boot-screen">
<div class="boot-container">
<div class="boot-bar">
<div class="boot-progress" id="boot-progress"></div>
</div>
<div class="boot-text">Starting DUSTHECAT.exe...</div>
</div>
</div>

<audio id="startup-sound">
<source src="https://www.myinstants.com/media/sounds/windows-98-startup.mp3">
</audio>

<!-- DESKTOP -->
<div id="desktop">

<img src="./floatingdus.png" id="floating-cat" alt="DUSTHECAT">

<!-- Fixed Icons -->
<div class="fixed-icons">
<div class="icon" id="icon-about" style="margin-bottom:20px;">
<img src="https://win98icons.alexmeub.com/icons/png/computer_explorer-0.png">
<div>About</div>
</div>

<div class="icon" id="icon-token" style="margin-bottom:20px;">
<img src="https://win98icons.alexmeub.com/icons/png/notepad-0.png">
<div>Token.txt</div>
</div>

<div class="icon" id="icon-roadmap">
<img src="https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png">
<div>Roadmap</div>
</div>
</div>

<!-- Random Media Icons -->
<div id="icon-layer"></div>

<!-- Media Viewer -->
<div id="mediaViewer" class="window" style="top:120px; left:200px; display:none;">
<div class="title-bar" onmousedown="dragStart(event, this.parentElement)">
<div class="title-bar-text" id="mediaTitle">Media Viewer</div>
<div class="title-bar-controls">
<button aria-label="Close" onclick="closeMedia()"></button>
</div>
</div>
<div class="window-body" id="mediaBody"></div>
</div>

<!-- About Window -->
<div id="about" class="window" style="top:120px; left:250px; display:none;">
<div class="title-bar" onmousedown="dragStart(event, this.parentElement)">
<div class="title-bar-text">About</div>
<div class="title-bar-controls">
<button aria-label="Close" onclick="closeWindow('about')"></button>
</div>
</div>
<div class="window-body">
<p>DUSTHECAT is the most powerful meme coin on Pump.fun.</p>
</div>
</div>

<!-- Token Window -->
<div id="token" class="window" style="top:150px; left:280px; display:none;">
<div class="title-bar" onmousedown="dragStart(event, this.parentElement)">
<div class="title-bar-text">Token Info</div>
<div class="title-bar-controls">
<button aria-label="Close" onclick="closeWindow('token')"></button>
</div>
</div>
<div class="window-body">
<p>Supply: 1,000,000,000</p>
<p>Tax: 0%</p>
<p>Chain: Solana</p>
</div>
</div>

<!-- Roadmap Window -->
<div id="roadmap" class="window" style="top:180px; left:310px; display:none;">
<div class="title-bar" onmousedown="dragStart(event, this.parentElement)">
<div class="title-bar-text">Roadmap</div>
<div class="title-bar-controls">
<button aria-label="Close" onclick="closeWindow('roadmap')"></button>
</div>
</div>
<div class="window-body">
<ol>
<li>Launch</li>
<li>Memes</li>
<li>Viral</li>
<li>Billions</li>
</ol>
</div>
</div>

</div>

<!-- TASKBAR -->
<div id="taskbar">
<div class="start-button">
<button id="start-btn">Start</button>
</div>
<div class="taskbar-spacer"></div>
<div class="taskbar-clock">
<div class="window" style="margin:0;">
<div class="window-body" id="clock"></div>
</div>
</div>
</div>

<!-- START MENU -->
<div id="start-menu" class="window">
<div class="window-body">
<p id="menu-about" style="cursor:pointer;">About</p>
<p id="menu-token" style="cursor:pointer;">Token Info</p>
<p id="menu-roadmap" style="cursor:pointer;">Roadmap</p>
</div>
</div>

<script>
/* ---------------- BOOT ---------------- */
let progress = 0;
const bootInterval = setInterval(() => {
progress += 4;
document.getElementById("boot-progress").style.width = progress + "%";
if (progress >= 100) {
clearInterval(bootInterval);
setTimeout(() => {
document.getElementById("boot-screen").style.display = "none";
document.getElementById("desktop").style.display = "block";

// audio can fail without user gesture; that's ok
try { document.getElementById("startup-sound").play(); } catch (e) {}

startCatAnimation();

// ensure desktop has real width/height before scattering
requestAnimationFrame(() => {
setTimeout(() => scatterIcons(), 120);
});

// wire UI once desktop is visible
wireUI();
}, 500);
}
}, 100);

/* ---------------- CLOCK ---------------- */
function updateClock() {
const now = new Date();
document.getElementById("clock").textContent =
now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
}
setInterval(updateClock, 1000);
updateClock();

/* ---------------- Z ORDER ---------------- */
let topZ = 10;
function bringToFront(el){
topZ += 1;
el.style.zIndex = topZ;
}

/* ---------------- START MENU ---------------- */
function toggleStartMenu(){
const menu = document.getElementById("start-menu");
menu.style.display = (menu.style.display === "block") ? "none" : "block";
}

document.addEventListener("mousedown", (e) => {
const menu = document.getElementById("start-menu");
const startBtn = document.getElementById("start-btn");
if (menu.style.display === "block" && !menu.contains(e.target) && e.target !== startBtn) {
menu.style.display = "none";
}
});

/* ---------------- WINDOW CONTROL ---------------- */
function openWindow(id){
const el = document.getElementById(id);
if (!el) return;
el.style.display = "block";
bringToFront(el);
document.getElementById("start-menu").style.display = "none";
}
function closeWindow(id){
const el = document.getElementById(id);
if (!el) return;
el.style.display = "none";
}

/* ---------------- MEDIA VIEWER ---------------- */
function openMedia(title, url, type) {
const viewer = document.getElementById("mediaViewer");
const body = document.getElementById("mediaBody");
document.getElementById("mediaTitle").textContent = title;

if (type === "video") {
body.innerHTML = `<video class="media-content" controls autoplay>
<source src="${url}">
</video>`;
} else {
body.innerHTML = `<img class="media-content" src="${url}">`;
}

viewer.style.display = "block";
bringToFront(viewer);
}
function closeMedia() {
document.getElementById("mediaViewer").style.display = "none";
document.getElementById("mediaBody").innerHTML = "";
}

/* ---------------- MEDIA DATA (YOUR FULL LIST) ---------------- */
const mediaIcons = [
{ label: "applepic.png", type: "image", url: "media/applepic.JPG" },
{ label: "detective.png", type: "image", url: "./media/detective.jpg" },
{ label: "detective2.png", type: "image", url: "./media/detective2.jpg" },
{ label: "detective3.png", type: "image", url: "./media/detective3.jpg" },
{ label: "ily.png", type: "image", url: "./media/ily.jpg" },
{ label: "lilypad.png", type: "image", url: "./media/lilypad.jpg" },
{ label: "model.png", type: "image", url: "./media/model.jpg" },
{ label: "model2.png", type: "image", url: "./media/model2.jpg" },

{ label: "apple.mp4", type: "video", url: "./media/apple.mp4" },
{ label: "applesauce.mp4", type: "video", url: "./media/applesauce.mp4" },
{ label: "box.mp4", type: "video", url: "./media/box.mp4" },
{ label: "christmas.mp4", type: "video", url: "./media/christmas.mp4" },
{ label: "finance.mp4", type: "video", url: "./media/finance.mp4" },
{ label: "letthatshitg.mp4", type: "video", url: "./media/letthatshitg.mp4" },
{ label: "me.mp4", type: "video", url: "./media/me.mp4" },
{ label: "pc.mp4", type: "video", url: "./media/pc.mp4" },
{ label: "pizza.mp4", type: "video", url: "./media/pizza.mp4" },
{ label: "setup.mp4", type: "video", url: "./media/setup.mp4" },
{ label: "subway.mp4", type: "video", url: "./media/subway.mp4" },
{ label: "vendingmachine.mp4", type: "video", url: "./media/vendingmachine.mp4" }
];

/* ---------------- NON-OVERLAPPING SCATTER ---------------- */
function scatterIcons() {
const layer = document.getElementById("icon-layer");
const desktop = document.getElementById("desktop");
if (!layer || !desktop) return;

layer.innerHTML = "";

const placed = [];
const iconWidth = 80;
const iconHeight = 90;
const padding = 10;

const maxW = desktop.clientWidth;
const maxH = desktop.clientHeight;

// avoid the fixed icon column (roughly)
const avoid = { x: 0, y: 0, w: 160, h: 360 };

mediaIcons.forEach(item => {
let x = 0, y = 0;
let attempts = 0;
let placedSuccessfully = false;

while (!placedSuccessfully && attempts < 800) {
x = Math.random() * (maxW - iconWidth);
y = Math.random() * (maxH - iconHeight);

// avoid fixed icon area
const hitsFixed =
x < avoid.x + avoid.w &&
x + iconWidth > avoid.x &&
y < avoid.y + avoid.h &&
y + iconHeight > avoid.y;

if (hitsFixed) {
attempts++;
continue;
}

let collision = false;
for (let other of placed) {
if (
x < other.x + iconWidth + padding &&
x + iconWidth + padding > other.x &&
y < other.y + iconHeight + padding &&
y + iconHeight + padding > other.y
) {
collision = true;
break;
}
}

if (!collision) {
placed.push({ x, y });
placedSuccessfully = true;
}

attempts++;
}

const icon = document.createElement("div");
icon.className = "icon";

const iconImg = item.type === "image"
? "https://win98icons.alexmeub.com/icons/png/kodak_imaging-0.png"
: "https://win98icons.alexmeub.com/icons/png/media_player-0.png";

icon.innerHTML = `
<img src="${iconImg}">
<div>${item.label}</div>
`;

icon.style.left = x + "px";
icon.style.top = y + "px";

// IMPORTANT: open on BOTH click and dblclick
icon.addEventListener("click", (e) => {
e.preventDefault();
e.stopPropagation();
openMedia(item.label, item.url, item.type);
});
icon.addEventListener("dblclick", (e) => {
e.preventDefault();
e.stopPropagation();
openMedia(item.label, item.url, item.type);
});

layer.appendChild(icon);
});
}

/* ---------------- WIRE UI (FIXED ICONS + START MENU) ---------------- */
function wireUI() {
const startBtn = document.getElementById("start-btn");
startBtn.onclick = toggleStartMenu;

// Open fixed windows on click AND dblclick
const aboutIcon = document.getElementById("icon-about");
const tokenIcon = document.getElementById("icon-token");
const roadmapIcon = document.getElementById("icon-roadmap");

const openAbout = (e) => { e.preventDefault(); e.stopPropagation(); openWindow("about"); };
const openToken = (e) => { e.preventDefault(); e.stopPropagation(); openWindow("token"); };
const openRoadmap = (e) => { e.preventDefault(); e.stopPropagation(); openWindow("roadmap"); };

aboutIcon.addEventListener("click", openAbout);
aboutIcon.addEventListener("dblclick", openAbout);

tokenIcon.addEventListener("click", openToken);
tokenIcon.addEventListener("dblclick", openToken);

roadmapIcon.addEventListener("click", openRoadmap);
roadmapIcon.addEventListener("dblclick", openRoadmap);

// Start menu items
document.getElementById("menu-about").onclick = () => openWindow("about");
document.getElementById("menu-token").onclick = () => openWindow("token");
document.getElementById("menu-roadmap").onclick = () => openWindow("roadmap");
}

/* ---------------- DRAGGING (RESTORED) ---------------- */
let dragItem = null;
let offsetX = 0;
let offsetY = 0;

function dragStart(e, element) {
dragItem = element;
bringToFront(element);
offsetX = e.clientX - element.offsetLeft;
offsetY = e.clientY - element.offsetTop;
document.onmousemove = drag;
document.onmouseup = dragEnd;
}
function drag(e) {
if (dragItem) {
dragItem.style.left = (e.clientX - offsetX) + "px";
dragItem.style.top = (e.clientY - offsetY) + "px";
}
}
function dragEnd() {
document.onmousemove = null;
dragItem = null;
}

/* ---------------- CAT ---------------- */
function startCatAnimation() {
const cat = document.getElementById("floating-cat");
let x = 100, y = 100, dx = 2, dy = 2;

function animate() {
const desktop = document.getElementById("desktop");
const maxX = desktop.clientWidth - cat.clientWidth;
const maxY = desktop.clientHeight - cat.clientHeight;

x += dx;
y += dy;

if (x <= 0 || x >= maxX) dx *= -1;
if (y <= 0 || y >= maxY) dy *= -1;

cat.style.left = x + "px";
cat.style.top = y + "px";

requestAnimationFrame(animate);
}
animate();
}
</script>

</body>
</html>
